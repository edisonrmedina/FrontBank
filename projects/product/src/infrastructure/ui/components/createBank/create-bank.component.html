<div class="bank-header">
  <svg width="26" height="26" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
          d="M45 18H43V16A3 3 0 0 0 40 13H38V11A3 3 0 0 0 35 8H3A3 3 0 0 0 0 11V27A3 3 0 0 0 3 30H5V32A3 3 0 0 0 8 35H10V37A3 3 0 0 0 13 40H45A3 3 0 0 0 48 37V21A3 3 0 0 0 45 18ZM41.09 38H16.91A6 6 0 0 0 12 33.09V24.91A6 6 0 0 0 16.91 20H41.09A6 6 0 0 0 46 24.91V33.09A6 6 0 0 0 41.09 38ZM12 22.86V21A1 1 0 0 1 13 20H14.86A4 4 0 0 1 12 22.86ZM46 21V22.86A4 4 0 0 1 43.14 20H45A1 1 0 0 1 46 21ZM3 28A1 1 0 0 1 2 27V11A1 1 0 0 1 3 10H35A1 1 0 0 1 36 11V13H8A3 3 0 0 0 5 16V28ZM7 32V16A1 1 0 0 1 8 15H40A1 1 0 0 1 41 16V18H13A3 3 0 0 0 10 21V33H8A1 1 0 0 1 7 32ZM13 37V35.14A4 4 0 0 1 14.86 38H13A1 1 0 0 1 12 37ZM45 37H43.14A4 4 0 0 1 46 35.14V37A1 1 0 0 1 45 37ZM29 26H31A1 1 0 0 0 31 24H30A1 1 0 1 0 29 24A3 3 0 0 0 29 30A1 1 0 0 1 29 32H27A1 1 0 0 0 27 34H29A1 1 0 1 0 31 33.82A3 3 0 0 0 29 28A1 1 0 0 1 27 26ZM22 28H18A1 1 0 0 0 18 30H22A1 1 0 0 0 22 28ZM40 28H36A1 1 0 0 0 36 30H40A1 1 0 0 0 40 28Z"
          fill="#0A126D" />
  </svg>
  <span>{{ translations['bank.title'] }}</span>
</div>

<div class="modal-container">

  <div class="modal-container-title">
    <h2>{{ isEditMode ? translations['form.editTitle'] : translations['form.createTitle'] }}</h2>
  </div>

  <div class="division-line"></div>
  
  <form [formGroup]="productForm" (ngSubmit)="submitForm()">
    <div class="form-grid">
      <div>
        <label for="id">{{ translations['form.id'] }}</label>
        <br>
        <input id="id" type="text" formControlName="id">
        @if (productForm.controls['id'].invalid && productForm.controls['id'].touched) {
          <div class="error">
            @if (productForm.controls['id'].errors?.['required']) {
              <span>{{translations['error.required'].replace("{{field}}",translations['form.id'])}}</span>
            }
            @if (productForm.controls['id'].errors?.['minlength']) {
              <span>{{translations['error.minlength'].replace("{{field}}",translations['form.id']).replace("{{min}}","3")}}</span>
            }
            @if (productForm.controls['id'].errors?.['maxlength']) {
              <span>{{translations['error.maxlength'].replace("{{field}}",translations['form.id']).replace("{{max}}","10")}}</span>
            }
            @if (productForm.controls['id'].errors?.['idExists']) {
              <span>{{translations['error.idExists']}}</span>
            }
          </div>
        }
      </div>
    
      <div>
        <label for="name">{{ translations['form.name'] }}</label>
        <input id="name" type="text" formControlName="name">
        @if (productForm.controls['name'].invalid && productForm.controls['name'].touched) {
          <div class="error">
            @if (productForm.controls['name'].errors?.['required']) {
              <span>{{ translations['error.required'].replace("{{field}}", translations['form.name']) }}</span>
            }
            @if (productForm.controls['name'].errors?.['minlength']) {
              <span>{{ translations['error.minlength'].replace("{{field}}", translations['form.name']).replace("{{min}}", "5") }}</span>
            }
            @if (productForm.controls['name'].errors?.['maxlength']) {
              <span>{{ translations['error.maxlength'].replace("{{field}}", translations['form.name']).replace("{{max}}", "100") }}</span>
            }
          </div>
        }
      </div>
    
      <div>
        <label for="description">{{ translations['form.description'] }}</label>
        <input id="description" formControlName="description">
        @if (productForm.controls['description'].invalid && productForm.controls['description'].touched) {
          <div class="error">
            @if (productForm.controls['description'].errors?.['required']) {
              <span>{{ translations['error.required'].replace("{{field}}", translations['form.description']) }}</span>
            }
            @if (productForm.controls['description'].errors?.['minlength']) {
              <span>{{ translations['error.minlength'].replace("{{field}}", translations['form.description']).replace("{{min}}", "10") }}</span>
            }
            @if (productForm.controls['description'].errors?.['maxlength']) {
              <span>{{ translations['error.maxlength'].replace("{{field}}", translations['form.description']).replace("{{max}}", "200") }}</span>
            }
          </div>
        }
      </div>
    
      <div>
        <label for="logo">{{ translations['form.logo'] }} </label>
        <input id="logo" type="text" formControlName="logo">
        @if (productForm.controls['logo'].invalid && productForm.controls['logo'].touched) {
          <div class="error">
            @if (productForm.controls['logo'].errors?.['required']) {
              <span>{{ translations['error.required'].replace("{{field}}", translations['form.logo']) }}</span>
            }
          </div>
        }
      </div>
    
      <div>
        <label for="date_release">{{ translations['form.date_release'] }}</label>
        <input id="date_release" type="date" formControlName="date_release" [min] = "today" >
        @if (productForm.controls['date_release'].invalid && productForm.controls['date_release'].touched) {
          <div class="error">
            @if (productForm.controls['date_release'].errors?.['required']) {
              <span>{{ translations['error.required'].replace("{{field}}", translations['form.date_release']) }}</span>
            }
            @if (productForm.controls['date_release'].errors?.['invalidDate']) {
              <span>{{ translations['error.invalidDate'].replace(" {{field}}", translations['form.date_release']) }}</span>
            }
          </div>
        }
      </div>
    
      <div>
        <label for="date_revision">{{ translations['form.date_revision'] }}</label>
        <input id="date_revision" type="date" formControlName="date_revision" [disabled]="true">
      </div>
      
    </div>

    <div class="buttons">
      <button class="button-primario" type="button" (click)="resetForm()">{{ isEditMode ? 'Cancelar' : 'Reiniciar' }}</button>
      <button type="button-secondario" (click)="submitForm()">{{ isEditMode ? 'Actualizar' : 'Enviar' }}</button>
    </div>
    
  </form>
  
</div>